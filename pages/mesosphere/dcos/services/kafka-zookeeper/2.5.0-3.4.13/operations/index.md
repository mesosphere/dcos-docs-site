---
layout: layout.pug
navigationTitle:
excerpt: Managing, repairing, and monitoring the service
title: Operations
menuWeight: 30
model: /mesosphere/dcos/services/kafka-zookeeper/data.yml
render: mustache
---

#include /mesosphere/dcos/services/include/operations.tmpl

## Backup

ZooKeeper backup and restore operations are typically done by creating copies of the latest data and log directories generated by the cluster. This can be done by SSHing into a node and manually copying the files you want to restore. The data directory is named `zookeeper-data-directory` and the log directory is named `zookeeper-log-directory`.

Use the `task exec` utility to go directly into the Mesos sandbox of a node.

```bash
dcos task exec -it zookeeper-<NUM> /bin/bash
```

This command puts you in your Mesos sandbox in an interactive bash environment. From here, go into the `zookeeper-data-path` or `zookeeper-log-path` directory and `cp` or `scp` files to a desired location, preferably one away from the network, in case of outage.

## Restore

To restore a cluster to a particular state, pause all ZooKeeper pods, restore the latest (or desired) log file to the `zookeeper-log-path`, and resume all ZooKeeper pods.

It is best practice to keep three to five of the latest, desired log files in case the restored log file restores the ensemble to an invalid state with ephemeral nodes. You can update ZooKeeper-specific configurations like `autopurge.Interval` to manage the purging of superfluous files.
