- var semanticVersion = /^[0-9]+\.[0-9]+/
- var menuPages = hierarchy.find('menus')

- var productPages = menuPages.filter(page => page.menus.indexOf('dcos-header') != -1)
- var pages = productPages.sort((a, b) => a.menuWeight - b.menuWeight)

- var headerItemsUnsorted = menuPages.filter(page => page.menus.indexOf('landing-header') != -1)
- var headerSphereItems = headerItemsUnsorted.filter(page => page.id != 'mesosphere')

- var otherProductPages = menuPages.filter(page => page.menus.indexOf('konvoy-header') != -1)
- var otherPages = otherProductPages.sort((a, b) => a.menuWeight - b.menuWeight)

- var mobileMenuItems = pages.concat(otherPages)

- function isItemActive(itemPath)
  if itemPath == '/mesosphere/dcos'
    if path == '/mesosphere/dcos'
      - return true
    - return semanticVersion.test(paths[3])
  if itemPath == '/mesosphere/dcos/services'
    if `/${path}`.startsWith(itemPath)
      - return !`/${path}`.startsWith(`${itemPath}/kubernetes`)
    - return false
  - return `/${path}`.startsWith('/mesosphere/dcos/services/kubernetes')

- var sectionTitle = 'DC/OS Documentation'
if paths[1] === 'services'
  - sectionTitle = 'Service Docs'


include header.pug
